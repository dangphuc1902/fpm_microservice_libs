syntax = "proto3";

package com.fpm2025.grpc;

import "common.proto";

option java_multiple_files = true;
option java_package = "com.fpm2025.grpc.wallet";
option java_outer_classname = "WalletProto";

service WalletService {
  rpc GetWallet(GetWalletRequest) returns (GetWalletResponse);
  rpc ValidateWallet(ValidateWalletRequest) returns (ValidateWalletResponse);
  rpc UpdateBalance(UpdateBalanceRequest) returns (UpdateBalanceResponse);
  rpc ListWallets(ListWalletsRequest) returns (ListWalletsResponse);
}

message GetWalletRequest {
  string wallet_id = 1;
  string user_id = 2;
}

message GetWalletResponse {
  bool success = 1;
  Wallet wallet = 2;
  string message = 3;
}

message ValidateWalletRequest {
  string wallet_id = 1;
  string user_id = 2;
}

message ValidateWalletResponse {
  bool valid = 1;
  string wallet_id = 2;
  double balance = 3;
  string message = 4;
}

message UpdateBalanceRequest {
  string wallet_id = 1;
  double amount = 2;
  string operation = 3;
  string user_id = 4;
}

message UpdateBalanceResponse {
  bool success = 1;
  double new_balance = 2;
  string message = 3;
}

message ListWalletsRequest {
  string user_id = 1;
}

message ListWalletsResponse {
  repeated Wallet wallets = 1;
}

message Wallet {
  string wallet_id = 1;
  string name = 2;
  string wallet_type = 3;
  double balance = 4;
  string currency = 5;
  string user_id = 6;
}
