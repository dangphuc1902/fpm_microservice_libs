syntax = "proto3";

package com.fpm2025.budget;

option java_package = "com.fpm2025.budget";
option java_outer_classname = "BudgetProto";
option java_multiple_files = true;

message Budget {
  string budget_id = 1;
  string user_id = 2;
  string category_id = 3;
  double limit_amount = 4;
  double spent_amount = 5;
  string month = 6;  // "2025-11"
}

message ListBudgetsRequest {
  string user_id = 1;
  string month = 2;
}

message ListBudgetsResponse {
  repeated Budget budgets = 1;
}

message SetBudgetRequest {
  string user_id = 1;
  string category_id = 2;
  double limit_amount = 3;
  string month = 4;
}

message CheckBudgetRequest {
  string user_id = 1;
  string category_id = 2;
  string month = 3;
}

message CheckBudgetResponse {
  bool exceeded = 1;
  double percent_used = 2;
  double remaining = 3;
}

message BudgetResponse {
  bool success = 1;
  Budget budget = 2;
  string message = 3;
}

service BudgetService {
  rpc ListBudgets (ListBudgetsRequest) returns (ListBudgetsResponse);
  rpc SetBudget (SetBudgetRequest) returns (BudgetResponse);
  rpc CheckBudget (CheckBudgetRequest) returns (CheckBudgetResponse);
}