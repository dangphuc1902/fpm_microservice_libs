syntax = "proto3";

package com.fpm2025.reporting;

option java_package = "com.fpm2025.reporting";
option java_outer_classname = "ReportingProto";
option java_multiple_files = true;

message Report {
  string report_id = 1;
  string user_id = 2;
  string type = 3;  // PDF, EXCEL
  string period = 4;  // 2025-11
  string file_url = 5;
}

message GenerateReportRequest {
  string user_id = 1;
  string from_date = 2;
  string to_date = 3;
  string type = 4;
}

message ListReportsRequest {
  string user_id = 1;
}

message ListReportsResponse {
  repeated Report reports = 1;
}

message DownloadReportRequest {
  string report_id = 1;
}

message DownloadReportResponse {
  bytes file_data = 1;
  string file_name = 2;
  string mime_type = 3;
}

message ReportResponse {
  bool success = 1;
  Report report = 2;
  string message = 3;
}

service ReportingService {
  rpc GenerateReport (GenerateReportRequest) returns (ReportResponse);
  rpc ListReports (ListReportsRequest) returns (ListReportsResponse);
  rpc DownloadReport (DownloadReportRequest) returns (DownloadReportResponse);
}